@model IEnumerable<ProjectsManagment.Models.Event>

@if(Model == null || Model.Count() ==0 )
{
    <p>Событий нет</p>
}
else
{ 
    <!--script type="text/javascript">
    function SelectAll() {
        $('#mainChbx').click({
            asd: Math.random() // что б IE не кешировал
        }, function () {
            setTimeout(UpdateBlock, 30000);
        });

    }
    $(document).ready(function () {
        UpdateBlock()
    });
</script  -->
    <table class="table">
        <tr>
            @if (ViewBag.IsNewEvents !=null && ViewBag.IsNewEvents)
            {
                <th><input type="checkbox" value="mainChbx" class="checkbox-inline" id="mainChbx"/></th>
            }
            <th>
                @Html.DisplayNameFor(model => model.Date)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.User)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.EventType)
            </th>
        </tr>

    @foreach (var item in Model.ToList()) {
        <tr>
            @if (ViewBag.IsNewEvents != null && ViewBag.IsNewEvents)
            {
                <td><input type="checkbox" name="SelectedEvent" value="@item.Id" class="checkbox-inline" /></td>
            }
            <td>
                @Html.DisplayFor(modelItem => item.Date)            
            </td>
            <td>
                @item.User.Surname @item.User.Name (@item.User.Email)
            </td>
            <td>
                @Html.Action("GetDescriptionForEvent","Event",item)
            </td>
        </tr>
    }

    </table>
}
